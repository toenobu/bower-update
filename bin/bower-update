#!/usr/bin/env node

/*
 * CLI for bower-update
 *
 * @author Artem Sapegin (http://sapegin.me)
 */

var chalk = require('chalk');
var updater = require('../index');
var opts = require('opts');

opts.parse([
	{
		'long': 'interactive',
		'description': 'update interactive'
	},
]);

updater({
	cwd: process.cwd(),
	interactive : opts.get('interactive')
}, function (err, updated) {
	if (err) {
		console.log(chalk.red.underline(err));
	}
	else {
		var number = updated.length;
		console.log('%d component%s updated.\n', number, number === 1 ? '' : 's');
		updated.forEach(function(component) {
			console.log(component.name + ':', chalk.red(component.then), 'â†’', chalk.green(component.now));
		});
	}
});
